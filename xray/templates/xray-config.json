{
  "log": {
    "access": "/var/log/xray/access.log",
    "error": "/var/log/xray/error.log",
    "loglevel": "info"
  },
  "inbounds": [
    {
      "port": "${XRAY_PORT}",
      "listen": "0.0.0.0",
      "protocol": "vless",
      "tag": "Vless-TCP-XTLS",
      "settings": {
        "clients": [
          {
            "id": "${UUID}",
            "flow": "${FLOW}",
            "level": 0
          }
        ],
        "decryption": "none"
      },
      "streamSettings": {
        "network": "${XRAY_NETWORK}",
        "security": "${SECURITY}",
        "realitySettings": {
          "show": false,
          "dest": "${DEST_HOST}:${DEST_PORT}",
          "xver": ${XVER},
          "serverNames": [
            "${DEST_HOST}",
            "icloud.com",
            "www.icloud.com",
            "apple.com",
            "www.apple.com",
            "mozilla.org",
            "addons.mozilla.org",
            "ebay.com",
            "www.ebay.com",
            "walmart.com",
            "www.walmart.com",
            "etsy.com",
            "www.etsy.com",
            "shopify.com",
            "www.shopify.com",
            "samsung.com",
            "www.samsung.com",
            "airbnb.com",
            "www.airbnb.com",
            "asml.com",
            "www.asml.com",
            "tsmc.com",
            "www.tsmc.com",
            "pfizer.com",
            "www.pfizer.com",
            "microsoft.com",
            "www.microsoft.com",
            "support.microsoft.com",
            "office.com",
            "www.office.com",
            "signup.live.com",
            "www.live.com",
            "outlook.live.com",
            "lovelive-anime.jp",
            "s0.awsstatic.com",
            "d1.awsstatic.com",
            "amazon.com",
            "m.media-amazon.com"
          ],
          "privateKey": "${PRIVATE_KEY}",
          "maxTimeDiff": 70000,
          "shortIds": [
            "${SHORTID}"
          ],
          "sockopt": {
            "tcpFastOpen": true,
            "tcpNoDelay": true
          }
        }
      },
      "sniffing": {
        "enabled": true,
        "destOverride": [
          "http",
          "tls",
          "quic"
        ],
        "routeOnly": true
      }
    }
  ],
  "outbounds": [
    {
      "tag": "IPv4_out",
      "protocol": "freedom",
      "settings": {
        "domainStrategy": "UseIP"
      }
    },
    {
      "tag": "blocked_out",
      "protocol": "blackhole",
      "settings": {
        "response": {
          "type": "http"
        }
      }
    },
    {
      "tag": "IPv6_out",
      "protocol": "freedom",
      "settings": {
        "domainStrategy": "UseIPv6"
      }
    },
    {
      "tag": "WARP_out",
      "protocol": "socks",
      "settings": {
        "servers": [
          {
            "address": "127.0.0.1",
            "port": 40000
          }
        ]
      },
      "streamSettings": {
        "network": "tcp"
      }
    }
  ],
  "dns": {
    "servers": [
      {
        "address": "8.8.8.8",
        "port": 53,
        "domains": [
          "geosite:netflix",
          "geosite:youtube",
          "geosite:bahamut",
          "geosite:hulu",
          "geosite:hbo",
          "geosite:disney",
          "geosite:bbc",
          "geosite:4chan",
          "geosite:fox",
          "geosite:abema",
          "geosite:dmm",
          "geosite:niconico",
          "geosite:pixiv",
          "geosite:bilibili",
          "geosite:viu",
          "geosite:pornhub"
        ]
      },
      "localhost"
    ]
  },
  "routing": {
    "domainStrategy": "IPIfNonMatch",
    "rules": [
      {
        "type": "field",
        "ip": [
          "geoip:cn"
        ],
        "outboundTag": "block"
      },
      {
        "type": "field",
        "outboundTag": "IPv6_out",
        "domain": [
          "geosite:google",
          "geosite:openai",
          "geosite:twitter",
          "geosite:netflix",
          "geosite:disney",
          "geosite:youtube",
          "geosite:spotify",
          "geosite:pornhub",
          "geosite:hulu",
          "geosite:hbo",
          "geosite:bbc",
          "geosite:4chan",
          "geosite:fox",
          "geosite:abema",
          "geosite:dmm",
          "geosite:niconico",
          "geosite:pixiv",
          "geosite:viu"
        ]
      },
      {
        "type": "field",
        "outboundTag": "WARP_out",
        "domain": [
          "test.com"
        ]
      },
      {
        "type": "field",
        "outboundTag": "V2Ray_out",
        "domain": [
          "test.com"
        ]
      },
      {
        "type": "field",
        "domain": [
          "geosite:cn"
        ],
        "outboundTag": "blocked_out"
      },
      {
        "type": "field",
        "ip": [
          "geoip:cn"
        ],
        "outboundTag": "blocked_out"
      },
      {
        "type": "field",
        "outboundTag": "IPv4_out",
        "network": "udp,tcp"
      },
      {
        "type": "field",
        "ip": [
          "0.0.0.0/8",
          "10.0.0.0/8",
          "100.64.0.0/10",
          "169.254.0.0/16",
          "172.16.0.0/12",
          "192.0.0.0/24",
          "192.0.2.0/24",
          "192.168.0.0/16",
          "198.18.0.0/15",
          "198.51.100.0/24"
        ],
        "outboundTag": "blocked"
      },
      {
        "inboundTag": [
          "api"
        ],
        "outboundTag": "api",
        "type": "field"
      },
      {
        "type": "field",
        "outboundTag": "blocked",
        "ip": [
          "geoip:private"
        ]
      },
      {
        "type": "field",
        "outboundTag": "blocked",
        "protocol": [
          "bittorrent"
        ]
      }
    ]
  },
  "api": {
    "services": [
      "HandlerService",
      "LoggerService",
      "StatsService"
    ],
    "tag": "api"
  },
  "stats": {},
  "policy": {
    "levels": {
      "0": {
        "statsUserUplink": true,
        "handshake": 2,
        "statsUserDownlink": true,
        "connIdle": 120
      }
    },
    "system": {
      "statsInboundUplink": true,
      "statsInboundDownlink": true,
      "statsOutboundUplink": true,
      "statsOutboundDownlink": true
    }
  }
}
