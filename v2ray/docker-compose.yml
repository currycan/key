services:
  v2ray:
    image: docker.io/currycan/v2ray-web:3.0.0
    container_name: v2ray
    environment:
      - DOMAIN=$domain
      - XUI_ACCOUNT=$domain
      - ALTERID=0
      - SSL_PROVIDER=2
      - LISTENING_PORT=443
      - DEST_HOST=yahoo.com
      - DUFS_PATH_PREFIX=/myfiles
      - XUI_WEBBASEPATH=3xadmin
      - XRAY_VMESS_AEAD_FORCED=false
    volumes:
      - ./data:/data
      - ./pki:/pki
      - ./acme:/acme.sh
      - ./.v2ray:/v2ray/config/.env
      - ./config/v2ray:/etc/v2ray
      - ./config/xray:/etc/xray
      - ./config/dufs:/etc/dufs
      - ./config/nginx:/etc/nginx/conf.d
      - ./x-ui:/etc/x-ui/
      - ./logs/v2ray:/var/log/v2ray
      - ./logs/xray:/var/log/xray
      - ./logs/x-ui:/var/log/x-ui
      - ./logs/dufs:/var/log/dufs
      - ./logs/supervisor:/var/log/supervisor
      - ./logs/nginx:/var/log/nginx
    # working_dir: /etc/nginx
    restart: always
    tty: true
    network_mode: "host"
    ulimits:
      nproc: 65535
      nofile:
        soft: 65536
        hard: 65536
